all: build test

test: test_evmone_evm384_bls12381_final_exp test_evmone_evm384_bls12381_miller_loop

build: build_bls12381 build_bls12381_miller_loop_test

build_bls12381:
	python3 genhuff.py > bls12_381.huff

build_bls12381_miller_loop_test:
	node compile.js MILLER_LOOP_TEST_HARD_CODED > bls12381_miller_loop_test.hex

build_bls12381_final_exp_test:
	node compile.js FINAL_EXPONENTIATION_TEST_HARD_CODED > bls12381_final_exp_test.hex

test_evmone_evm384_bls12381_miller_loop:
	./run_evmone_bench.sh bls12381_miller_loop_test.hex 6fe5fc5ac1b44f8b62a45073ea17e764f510be4ad062ddac1443cdd48a0f272c6dd8ca6c12909b239633f2fcc06fe002a4ca4039595ef37d8ccf22a6b276986400ed743ccb9893cd50089f0d1e519c3859943588b3e62930ccd001109dc54c00a73af677097001d742f020b39b1796019d951427d21034906a45804c0ddbf6ad3db02a065c813456ffb2cb673f06e60b85bdc7c871760a88948e9232f506c56c24d6376d94f5c14f251f9a4b0f00513bda83e9f6f1f53ecd698a4155d4401202e9eaef748e9595b4c5214cb330ad024a621a36b0a520f0910694454b59722154a74745bb9cb17c6561887d8d9381a80d36c1653329f55188e73e6503a5d895398f2f8122f834c9ba175b18b45c404aa46e0662ce95932167df1c72cfd882560a5bc70fd3e1a0da9862b3744ae7fd07c7814701f6f31f0393bb1e3fd846446f5aced54999cb194ad1e522b3a13837910992e97760a4574ef94bbbbfe782efe205014f5980799d510661abedad3a5630035a07c78473860406ef5543d020800b043fb78deeed59a1f29fb89a45f290c7c7eaea0d35ed11655246fe37b3cc2816f9d6458b51f2d3a56fe143c372abc7c406ba3cee285f2ab0f5ef564143572115fa527a75491e8a7430b637dc4309844e789b5b3f46dbfb3a8ae6be3d104d5dd8157fe7d0a3d60f2db606d77fba3a3195c74cf8abacfc31d95ede50d1bafca48379ebb40474cef5218c3b1c30e6523824099b2f9ebae851358bcf820d7b5b3669f8514becde0173354b055944f4753280efe4a4c76ce7d55bb5df099ae564eb9113

test_evmone_evm384_bls12381_final_exp:
	./run_evmone_bench.sh bls12381_final_exp_test.hex 6fe5fc5ac1b44f8b62a45073ea17e764f510be4ad062ddac1443cdd48a0f272c6dd8ca6c12909b239633f2fcc06fe002a4ca4039595ef37d8ccf22a6b276986400ed743ccb9893cd50089f0d1e519c3859943588b3e62930ccd001109dc54c00a73af677097001d742f020b39b1796019d951427d21034906a45804c0ddbf6ad3db02a065c813456ffb2cb673f06e60b85bdc7c871760a88948e9232f506c56c24d6376d94f5c14f251f9a4b0f00513bda83e9f6f1f53ecd698a4155d4401202e9eaef748e9595b4c5214cb330ad024a621a36b0a520f0910694454b59722154a74745bb9cb17c6561887d8d9381a80d36c1653329f55188e73e6503a5d895398f2f8122f834c9ba175b18b45c404aa46e0662ce95932167df1c72cfd882560a5bc70fd3e1a0da9862b3744ae7fd07c7814701f6f31f0393bb1e3fd846446f5aced54999cb194ad1e522b3a13837910992e97760a4574ef94bbbbfe782efe205014f5980799d510661abedad3a5630035a07c78473860406ef5543d020800b043fb78deeed59a1f29fb89a45f290c7c7eaea0d35ed11655246fe37b3cc2816f9d6458b51f2d3a56fe143c372abc7c406ba3cee285f2ab0f5ef564143572115fa527a75491e8a7430b637dc4309844e789b5b3f46dbfb3a8ae6be3d104d5dd8157fe7d0a3d60f2db606d77fba3a3195c74cf8abacfc31d95ede50d1bafca48379ebb40474cef5218c3b1c30e6523824099b2f9ebae851358bcf820d7b5b3669f8514becde0173354b055944f4753280efe4a4c76ce7d55bb5df099ae564eb9113
